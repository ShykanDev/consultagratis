import{d as se,f as i,i as G,j as m,o as u,a as e,t as d,F as M,k as P,n as J,l as I,m as de,u as ue,p as F,q as $,c as pe,w as W,_ as me,b as l,r as Y,s as q,e as v,x as ge,y as fe}from"./index-DIUVDi_f.js";import{g as be,c as E,a as K,b as Q,T as X,d as Z,u as ee}from"./index.esm2017-BOjIA9rH.js";import{c as te}from"./client-DmbvHGF3.js";import{e as ae}from"./expert-DBlfD7Zb.js";import{s as ye}from"./system-DDX0GxV9.js";const he={class:"transition-all duration-200 ease-in-out"},xe={class:"overflow-hidden mx-1 text-center bg-white rounded-xl border border-gray-200 shadow-lg transition-all duration-300 hover:shadow-xl"},ve={class:"py-3 bg-gradient-to-r from-blue-600 to-indigo-700"},we={class:"text-lg font-medium text-white"},Se={class:"inline-block px-3 py-1 mt-1 text-sm font-bold text-blue-800 bg-white rounded-full"},ke={class:"p-3 space-y-2"},De=["onClick","disabled"],_e={key:0,class:"flex absolute inset-0 justify-center items-center bg-gray-800 bg-opacity-0 rounded-lg transition-all duration-300 pointer-events-none hover:bg-opacity-80"},Te=se({__name:"DateSquare",props:{dayInfo:{},availableForAppointment:{type:Boolean},availableHours:{},hoursTaken:{},selectedDay:{},selectedHour:{}},emits:["hourSelected"],setup(a,{emit:C}){const c=a,H=C,w=i(c.selectedDay),p=i(c.selectedHour);G(()=>c.selectedDay,n=>{w.value=n}),G(()=>c.selectedHour,n=>{p.value=n});function x(n){c.hoursTaken.includes(n)||H("hourSelected",n)}return(n,S)=>(u(),m("div",he,[e("article",xe,[e("div",ve,[e("p",we,d(n.dayInfo.day),1),e("span",Se,d(n.dayInfo.dayNumber),1)]),e("div",ke,[(u(!0),m(M,null,P(n.availableHours,(r,N)=>(u(),m("button",{key:N,type:"button",onClick:j=>x(r),disabled:n.hoursTaken.includes(r),id:"hourArea",class:J(["relative px-3 py-2 w-full text-left rounded-lg border transition-all duration-200 ease-out",{"border-gray-200 bg-gray-50 hover:bg-blue-50 hover:border-blue-200":!n.hoursTaken.includes(r)&&!(r===p.value&&n.dayInfo.day===w.value),"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":n.hoursTaken.includes(r),"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-600 shadow-md":r===p.value&&n.dayInfo.day===w.value,"hover:shadow-md hover:transform hover:scale-[1.02]":!n.hoursTaken.includes(r)}])},[e("span",{class:J(["font-medium",{"line-through text-gray-500":n.hoursTaken.includes(r),"text-blue-800":!n.hoursTaken.includes(r)&&!(r===p.value&&n.dayInfo.day===w.value)}])},d(r),3),n.hoursTaken.includes(r)?(u(),m("div",_e,S[0]||(S[0]=[e("span",{class:"text-xs font-medium text-white opacity-0 transition-opacity hover:opacity-100"}," No Disponible ",-1)]))):I("",!0)],10,De))),128))])])]))}}),Ae=de("experts",{state:()=>({area:"Data",expertType:"",expertName:"",proffession:"",title:"",availableTimeData:[],userDateSelection:"",userHourSelection:"",isLoading:!1,expertUid:""}),actions:{setExpertName(a){this.expertName=a},setExpertUid(a){this.expertUid=a},setExpertType(a){this.expertType=a},setProffession(a){this.proffession=a},setTitle(a){this.title=a},setAvailableTimeData(a){this.availableTimeData=a},setUserDateSelection(a){this.userDateSelection=a},setUserHourSelection(a){this.userHourSelection=a},setIsLoading(a){this.isLoading=a},setArea(a){this.area=a}},getters:{getExpertName:a=>a.expertName,getExpertUid:a=>a.expertUid,getExpertType:a=>a.expertType,getProffession:a=>a.proffession,getTitle:a=>a.title,getAvailableTimeData:a=>a.availableTimeData,getUserDateSelection:a=>a.userDateSelection,getUserHourSelection:a=>a.userHourSelection,getIsLoading:a=>a.isLoading,getArea:a=>a.area}}),Ie={class:"py-12 bg-gradient-to-b from-gray-50 to-white"},Ne={class:"container px-4 mx-auto max-w-7xl"},Ee={class:"p-8 bg-white rounded-xl ring-1 ring-gray-100 shadow-lg"},Ce={class:"flex gap-4 items-center mb-6"},He={class:"text-3xl font-semibold font-openSans text-slate-700"},Ue={class:"flex gap-3 items-center mt-1 text-lg text-gray-600"},Le={key:0,class:"p-6 bg-emerald-50 rounded-lg"},Fe={class:"flex flex-col gap-4 items-start md:flex-row md:items-center"},$e={class:"flex gap-3 items-center"},qe={href:"#",class:"flex items-center px-6 py-3 space-x-2 font-medium text-white bg-emerald-600 rounded-xl transition-all transform hover:bg-emerald-700 hover:shadow-lg"},Me={key:1,class:"mt-6 bg-indigo-50 rounded-xl border border-indigo-600"},Pe={class:"flex flex-col gap-4 items-center p-6 md:flex-row"},je={class:"flex gap-3 items-center"},Oe={class:"text-lg font-semibold text-indigo-900"},Be={key:0,class:"p-6 mt-8 bg-white rounded-xl ring-1 ring-gray-100 shadow-lg"},Re={class:"flex gap-2 items-center mb-6 text-xl font-semibold text-gray-900"},Ve={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-7"},ze={key:1,class:"mt-8 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-xl"},Ge={class:"flex flex-col gap-6 items-center p-8 md:flex-row"},Je={class:"flex-1"},We={class:"flex gap-3 items-center text-2xl font-semibold text-white"},Ye={class:"font-bold"},Ke={class:"font-mono"},Qe={class:"py-12 bg-gray-50"},Xe={class:"container px-4 mx-auto max-w-7xl"},Ze={class:"grid gap-8 lg:grid-cols-2"},et={class:"p-8 bg-white rounded-xl ring-1 ring-gray-100 shadow-lg"},tt={class:"flex gap-2 items-center mb-6 text-2xl font-bold text-gray-900"},at={class:"grid gap-6 md:grid-cols-2"},st={class:"leading-relaxed text-gray-700"},ot={class:"p-8 bg-white rounded-xl ring-1 ring-gray-100 shadow-lg"},nt={class:"flex gap-3 items-center mb-8"},lt={class:"mb-8"},rt={class:"block mb-4 text-lg font-medium text-gray-700"},it={class:"relative rounded-xl border-2 border-gray-300 border-dashed transition-colors hover:border-emerald-500"},ct={class:"flex flex-col justify-center items-center p-8 text-center"},dt={class:"p-4 mb-8 bg-blue-50 rounded-lg border-l-4 border-blue-400"},ut={class:"flex gap-3 items-start"},pt={type:"submit",class:"flex gap-2 justify-center items-center px-8 py-4 w-full text-lg font-semibold text-white bg-emerald-600 rounded-xl transition-all transform hover:bg-emerald-700 hover:shadow-lg"},ht=se({__name:"ExpertInfoView",props:{title:{type:String,default:"Profesionales y Expertos en CONTADURÍA"},area:{type:String,default:"Ciencias Sociales"},availableDay:{type:String,default:"Tue"},availableHourStart:{type:Number,default:10},availableHourEnd:{type:Number,default:14},expertType:{type:String,default:"Contadores"},description:{type:String,default:"Los Contadores trabajan tanto para el sector público, como para el privado y son aquellos profesionales responsables del estado financiero y de los libros contables del individuo o empresa que haya solicitado sus servicios, en tal sentido, su misión consiste en velar que su clientela cumpla con la legislación aplicable y con los procedimientos establecidos, además de garantizar que haya registro de los ingresos y egresos de sus cuentas."},offersLeft:{type:Array,default:()=>[{icon:"fas fa-file-alt",text:"Documentar informes financieros para los clientes"},{icon:"fas fa-book",text:"Revisar los libros contables de los clientes."},{icon:"fas fa-chart-bar",text:"Analizar las ganancias y los gastos."},{icon:"fas fa-balance-scale",text:"Elaborar el balance de los libros financieros."},{icon:"fas fa-pen-nib",text:"Redactar informes sobre el estado financiero de sus clientes."}]},offersRight:{type:Array,default:()=>[{icon:"fas fa-file-excel",text:"Manejar registros, sistemas y presupuestos financieros."},{icon:"fas fa-user-tie",text:"Hacer auditorías financieras para sus clientes."},{icon:"fas fa-tasks",text:"Brindar asesoría financiera y tributaria."},{icon:"fas fa-glasses",text:"Examinar las cuentas y registros financieros."},{icon:"",text:"Y mucho más"}]},categories:{type:Array,default:()=>[{name:"Contador",link:"#",active:!0},{name:"Asesorías Legales",link:"./c-abogados.php",active:!1},{name:"Arquitecto",link:"./c-arquitectos.php",active:!1},{name:"Importación y Exportación",link:"./c-comercio.php",active:!1},{name:"Doctor",link:"./c-doctores.php",active:!1},{name:"Gestoría en trámites",link:"./c-gestorias.php",active:!1},{name:"Ingeniería Computacional",link:"./c-computacion.php",active:!1},{name:"Marketing",link:"./c-marketing.php",active:!1},{name:"Peritaje",link:"./c-peritaje.php",active:!1},{name:"Publicidad",link:"./c-publicidad.php",active:!1},{name:"Servicios Web",link:"./c-web.php",active:!1},{name:"Traductor",link:"./c-traductores.php",active:!1}]},dataInfo:{type:Object,required:!0},proffession:{type:String,required:!0,default:"Contador"}},setup(a){const C=ue();Ae(),console.log(C.params.name);const c=a;F(()=>({Sun:"Domingo",Mon:"Lunes",Tue:"Martes",Wed:"Miércoles",Thu:"Jueves",Fri:"Viernes",Sat:"Sábado"})[c.availableDay]||c.availableDay);const H=F(()=>{const o=new Date,s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][o.getDay()],h=o.getHours();return s===c.availableDay&&h>=c.availableHourStart&&h<c.availableHourEnd});F(()=>"fas fa-dollar-sign"),i(new Date);const w=ye(),p=i(),x=be(),n=E(x,"Dates"),S=i(!0),r=async()=>{S.value=!0,p.value=[];try{const t=(await K(n)).docs[0];if(!t)throw new Error("No se encontró ningún documento en collectionDates");const s=t.data();if(console.log(s),!Array.isArray(s.weeklySchedule))throw new Error("weeklySchedule no es un array");const h=new Date,g=h.getDay(),y=s.weeklySchedule.map(D=>{const _=new Date(h),L=D.dayInfo.day,A=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"].indexOf(L)-g,ie=A>=0?A:7+A;_.setDate(h.getDate()+ie);const ce=_.toLocaleString("es-ES",{month:"long"});return{dayInfo:{...D.dayInfo,dayNumber:_.getDate(),fullDate:_.toISOString().split("T")[0],monthName:ce}}});y.sort((D,_)=>{const L=new Date(D.dayInfo.fullDate),A=new Date(_.dayInfo.fullDate);return L.getTime()-A.getTime()}),p.value=[{...s,weeklySchedule:y}],w.setFirebaseData({...s,weeklySchedule:y}),S.value=!1}catch(o){console.error("Error fetching dates:",o),S.value=!1}};$(()=>{r()});const N=E(x,"Experts"),j=async()=>{try{Q(N,{name:"Luis Ángel",email:"luis.angel@consultagratis.com",age:25,active:!0,createdAt:X.now(),userId:"123abc"});const o=Z(N);ee(o,{id:"123abc"}),console.log("Usuario agregado correctamente")}catch(o){console.log("Error al agregar el usuario ",o)}};$(()=>{j()});const k=i(),f=i(),O=i(),U=i(),B=i();new Date().toLocaleString("es-ES",{month:"long"});const oe=(o,t,s)=>{O.value=s,ne.value=o.dayInfo.hoursTaken,t.target.id=="hourArea"&&(k.value=o.dayInfo.day,console.log(k.value),f.value=t.target.innerText,console.log(f.value),U.value=o.dayInfo.dayNumber,console.log(t.target.id),B.value=o.dayInfo.monthName)},ne=i([]),R=i(),T=te(),V=i(!1),b=i([]),z=async()=>{try{if(T.getClientUid){const o=E(x,`users/${T.getClientUid}/FutureAppointments`),t=await K(o);console.log("GETTING CLIENT APPOINTMENTS"),b.value=[],t.forEach(s=>{b.value.push({id:s.id,...s.data()}),console.log(s.data())}),b.value.length>0&&b.value.some(s=>s.profession===c.profession)&&(console.log("User has scheduled an appointment with this expert"),V.value=!0)}}catch(o){console.log(`Error getting client appointments: ${o}`)}};$(()=>{z()});const le=async()=>{try{if(T.getClientUid){const o=E(x,`users/${T.getClientUid}/FutureAppointments`),t={day:k.value,hour:f.value,month:B.value,dayNumber:U.value,createdAt:X.now(),year:new Date().getFullYear(),userId:T.getClientUid,proffession:c.proffession};await Q(o,t)}}catch(o){console.log(o)}},re=async o=>{if(!ge().getIsAuth){alert("Por favor, inicia sesión para continuar");return}if(V.value){alert("Ya tiene una cita programada con este experto, no puede programar otra, hasta que no se realice la cita");return}if(!p.value){alert("No se encontraron datos de citas disponibles");return}const t=JSON.parse(JSON.stringify(p.value[0]));if(t.weeklySchedule[o].dayInfo.hoursTaken.includes(f.value)){alert("Por favor, selecciona una hora disponible");return}if(console.log(t),t.weeklySchedule[o].dayInfo.hoursTaken.includes(f.value)){alert("Por favor, selecciona una hora disponible");return}t.weeklySchedule[o].dayInfo.hoursTaken.push(f.value),console.log(t);try{R.value=t,await ee(Z(x,"Dates/HS3S8Tsu6m7ce3DNtgzi"),{weeklySchedule:R.value.weeklySchedule}),r(),console.log("Appointment scheduled successfully"),le(),z()}catch(s){console.log(s)}};return(o,t)=>{const s=Y("v-icon"),h=Y("RouterLink");return u(),pe(me,null,{main:W(()=>[e("section",Ie,[e("div",Ne,[e("div",Ee,[e("div",Ce,[l(s,{name:"bi-person-badge",scale:"1.5",class:"text-emerald-600"}),e("div",null,[e("h2",He,d(q(ae)().getExpertArea),1),e("p",Ue,[l(s,{name:"hi-solid-user-circle",class:"text-gray-500"}),v(" "+d(q(ae)().getExpertName),1)])])]),H.value?(u(),m("div",Le,[e("div",Fe,[e("div",$e,[l(s,{name:"bi-check-circle",class:"text-2xl text-emerald-600 animate-pulse"}),t[1]||(t[1]=e("span",{class:"text-lg font-semibold text-emerald-700"},"Disponible para prueba gratuita",-1))]),e("a",qe,[l(s,{name:"bi-calendar-plus",class:"text-lg"}),t[2]||(t[2]=e("span",null,"Agendar prueba gratuita",-1))])])])):I("",!0),q(te)().getClientUid&&b.value.length>0?(u(),m("section",Me,[e("div",Pe,[e("div",je,[l(s,{name:"bi-calendar2-check",class:"text-2xl text-indigo-600"}),e("h3",Oe," Usted tiene una cita programada: "+d(b.value[0].day)+" "+d(b.value[0].dayNumber)+" "+d(b.value[0].month)+" "+d(b.value[0].year),1)]),l(h,{to:{name:"user"},class:"flex items-center px-4 py-2 space-x-2 text-indigo-700 bg-white rounded-lg shadow-sm"},{default:W(()=>[l(s,{name:"bi-eye"}),t[3]||(t[3]=e("span",null,"Ver detalles",-1))]),_:1})])])):I("",!0)]),p.value&&p.value.length>0?(u(),m("section",Be,[e("h3",Re,[l(s,{name:"bi-clock-history",class:"text-gray-600"}),t[4]||(t[4]=v(" Seleccione su horario preferido "))]),e("div",Ve,[(u(!0),m(M,null,P(p.value[0].weeklySchedule,(g,y)=>(u(),m("div",{key:y,class:"animate-fade-up",style:fe({animationDelay:`${y*100}ms`})},[l(Te,{onClick:D=>oe(g,D,y),"day-info":g.dayInfo,"available-for-appointment":g.dayInfo.isDayAvailable,"available-hours":g.dayInfo.availableHours,"hours-taken":g.dayInfo.hoursTaken,"selected-day":k.value,"selected-hour":f.value},null,8,["onClick","day-info","available-for-appointment","available-hours","hours-taken","selected-day","selected-hour"])],4))),128))])])):I("",!0),k.value&&f.value?(u(),m("article",ze,[e("div",Ge,[e("div",Je,[e("h3",We,[l(s,{name:"bi-calendar2-event",class:"text-white"}),e("span",null,[t[5]||(t[5]=v(" Confirmación de cita - ")),e("span",Ye,d(k.value)+" "+d(U.value),1),t[6]||(t[6]=v(" a las ")),e("span",Ke,d(f.value),1)])]),t[7]||(t[7]=e("p",{class:"mt-2 text-blue-100"}," Por favor revise los detalles antes de confirmar ",-1))]),e("button",{onClick:t[0]||(t[0]=g=>re(O.value)),class:"flex items-center px-8 py-3 space-x-2 font-semibold text-blue-900 bg-white rounded-xl transition-all hover:bg-blue-50"},[l(s,{name:"bi-send-check",class:"text-blue-600"}),t[8]||(t[8]=e("span",null,"Confirmar cita",-1))])])])):I("",!0)])]),e("section",Qe,[e("div",Xe,[e("div",Ze,[e("div",et,[e("h2",tt,[l(s,{name:"bi-patch-question",class:"text-blue-600"}),t[9]||(t[9]=v(" Servicios profesionales "))]),e("div",at,[(u(!0),m(M,null,P(a.offersLeft,(g,y)=>(u(),m("div",{key:y,class:"flex gap-3 items-start p-4 bg-gray-50 rounded-lg"},[l(s,{name:g.icon,class:"flex-shrink-0 mt-1 text-blue-600"},null,8,["name"]),e("p",st,d(g.text),1)]))),128))])]),e("div",ot,[e("div",nt,[l(s,{name:"bi-chat-dots",class:"text-2xl text-emerald-600"}),t[10]||(t[10]=e("h2",{class:"text-2xl font-bold text-gray-900"},"Formulario de contacto",-1))]),e("div",lt,[e("label",rt,[l(s,{name:"bi-paperclip",class:"mr-2"}),t[11]||(t[11]=v(" Adjuntar documentos "))]),e("div",it,[t[14]||(t[14]=e("input",{type:"file",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,-1)),e("div",ct,[l(s,{name:"bi-cloud-upload",class:"mb-4 text-4xl text-gray-400"}),t[12]||(t[12]=e("p",{class:"text-gray-500"},"Arrastra archivos o haz clic para subir",-1)),t[13]||(t[13]=e("p",{class:"mt-2 text-sm text-gray-400"},"Formatos soportados: PDF, JPG, PNG (hasta 5MB)",-1))])])]),e("div",dt,[e("div",ut,[l(s,{name:"bi-info-circle",class:"flex-shrink-0 mt-1 text-blue-500"}),t[15]||(t[15]=e("div",null,[e("h3",{class:"text-lg font-semibold text-blue-800"},"Política de privacidad"),e("p",{class:"mt-2 text-blue-700"}," Su información está protegida bajo nuestra política de seguridad. No compartimos datos personales con terceros. ")],-1))])]),e("button",pt,[l(s,{name:"bi-send",class:"text-xl"}),t[16]||(t[16]=v(" Enviar solicitud "))])])])])])]),_:1})}}});export{ht as default};
